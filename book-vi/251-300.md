# 欧拉组合数学系列 - 第6卷：生成函数 (251-300)

## 概述
本卷涵盖生成函数的核心内容，包括普通生成函数(OGF)、指数生成函数(EGF)、生成函数运算、递推求解以及组合应用等主题。

---

## 题目 251 - 普通生成函数基础

**题目描述:**
求数列 $\{1, 1, 1, 1, \ldots\}$ 的普通生成函数。

**解答过程:**

设普通生成函数为 $G(x) = \sum_{n=0}^{\infty} a_n x^n$，其中 $a_n = 1$ 对所有 $n$。

$$G(x) = 1 + x + x^2 + x^3 + \cdots$$

这是等比级数，当 $|x| < 1$ 时：

$$G(x) = \frac{1}{1-x}$$

**答案:** $G(x) = \dfrac{1}{1-x}$

---

## 题目 252 - 几何数列的生成函数

**题目描述:**
求数列 $\{1, 2, 4, 8, 16, \ldots\}$ 的普通生成函数，其中 $a_n = 2^n$。

**解答过程:**

$$G(x) = \sum_{n=0}^{\infty} 2^n x^n = \sum_{n=0}^{\infty} (2x)^n$$

当 $|2x| < 1$，即 $|x| < \frac{1}{2}$ 时：

$$G(x) = \frac{1}{1-2x}$$

**答案:** $G(x) = \dfrac{1}{1-2x}$

---

## 题目 253 - 线性数列的生成函数

**题目描述:**
求数列 $\{0, 1, 2, 3, 4, \ldots\}$ 的普通生成函数，即 $a_n = n$（$n \geq 0$）。

**解答过程:**

我们知道 $\frac{1}{1-x} = \sum_{n=0}^{\infty} x^n$

对其求导：
$$\frac{d}{dx}\left(\frac{1}{1-x}\right) = \frac{1}{(1-x)^2} = \sum_{n=1}^{\infty} n x^{n-1}$$

乘以 $x$：
$$\frac{x}{(1-x)^2} = \sum_{n=1}^{\infty} n x^n = \sum_{n=0}^{\infty} n x^n$$

**答案:** $G(x) = \dfrac{x}{(1-x)^2}$

---

## 题目 254 - 平方数列的生成函数

**题目描述:**
求数列 $\{0, 1, 4, 9, 16, \ldots\}$ 的普通生成函数，即 $a_n = n^2$。

**解答过程:**

从 $\sum_{n=0}^{\infty} n x^n = \frac{x}{(1-x)^2}$ 出发

对其求导并乘以 $x$：
$$\frac{d}{dx}\left(\frac{x}{(1-x)^2}\right) = \frac{(1-x)^2 + 2x(1-x)}{(1-x)^4} = \frac{1+x}{(1-x)^3}$$

乘以 $x$：
$$\sum_{n=0}^{\infty} n^2 x^n = \frac{x(1+x)}{(1-x)^3}$$

**答案:** $G(x) = \dfrac{x(1+x)}{(1-x)^3}$

---

## 题目 255 - 二项式系数的生成函数

**题目描述:**
求数列 $\{\binom{n}{0}, \binom{n}{1}, \binom{n}{2}, \ldots, \binom{n}{n}\}$ 的普通生成函数。

**解答过程:**

由二项式定理：
$$(1+x)^n = \sum_{k=0}^{n} \binom{n}{k} x^k$$

因此，数列 $\{\binom{n}{k}\}_{k=0}^{n}$ 的生成函数为 $(1+x)^n$。

**答案:** $G(x) = (1+x)^n$

---

## 题目 256 - 交错符号数列的生成函数

**题目描述:**
求数列 $\{1, -1, 1, -1, \ldots\}$ 的普通生成函数。

**解答过程:**

$$G(x) = \sum_{n=0}^{\infty} (-1)^n x^n = \sum_{n=0}^{\infty} (-x)^n$$

当 $|-x| < 1$ 时：

$$G(x) = \frac{1}{1-(-x)} = \frac{1}{1+x}$$

**答案:** $G(x) = \dfrac{1}{1+x}$

---

## 题目 257 - 斐波那契数列的生成函数

**题目描述:**
求斐波那契数列 $\{F_n\}$ 的普通生成函数，其中 $F_0 = 0, F_1 = 1, F_n = F_{n-1} + F_{n-2}$。

**解答过程:**

设 $G(x) = \sum_{n=0}^{\infty} F_n x^n$

由递推关系：
$$G(x) = F_0 + F_1 x + \sum_{n=2}^{\infty} (F_{n-1} + F_{n-2}) x^n$$
$$= x + x\sum_{n=2}^{\infty} F_{n-1} x^{n-1} + x^2\sum_{n=2}^{\infty} F_{n-2} x^{n-2}$$
$$= x + x(G(x) - F_0) + x^2 G(x)$$
$$= x + xG(x) + x^2 G(x)$$

解得：
$$G(x)(1-x-x^2) = x$$
$$G(x) = \frac{x}{1-x-x^2}$$

**答案:** $G(x) = \dfrac{x}{1-x-x^2}$

---

## 题目 258 - 生成函数的加法运算

**题目描述:**
设 $A(x)$ 是 $\{a_n\}$ 的生成函数，$B(x)$ 是 $\{b_n\}$ 的生成函数，求 $\{a_n + b_n\}$ 的生成函数。

**解答过程:**

$$A(x) = \sum_{n=0}^{\infty} a_n x^n, \quad B(x) = \sum_{n=0}^{\infty} b_n x^n$$

$$A(x) + B(x) = \sum_{n=0}^{\infty} (a_n + b_n) x^n$$

这正是数列 $\{a_n + b_n\}$ 的生成函数。

**答案:** $G(x) = A(x) + B(x)$

---

## 题目 259 - 生成函数的数乘运算

**题目描述:**
设 $A(x)$ 是 $\{a_n\}$ 的生成函数，$c$ 为常数，求 $\{c \cdot a_n\}$ 的生成函数。

**解答过程:**

$$A(x) = \sum_{n=0}^{\infty} a_n x^n$$

$$c \cdot A(x) = c \sum_{n=0}^{\infty} a_n x^n = \sum_{n=0}^{\infty} (c \cdot a_n) x^n$$

这正是数列 $\{c \cdot a_n\}$ 的生成函数。

**答案:** $G(x) = c \cdot A(x)$

---

## 题目 260 - 生成函数的乘法（卷积）

**题目描述:**
设 $A(x) = \sum_{n=0}^{\infty} a_n x^n$，$B(x) = \sum_{n=0}^{\infty} b_n x^n$，求 $A(x) \cdot B(x)$ 中 $x^n$ 的系数。

**解答过程:**

$$A(x) \cdot B(x) = \left(\sum_{i=0}^{\infty} a_i x^i\right) \left(\sum_{j=0}^{\infty} b_j x^j\right)$$

$$= \sum_{n=0}^{\infty} \left(\sum_{k=0}^{n} a_k b_{n-k}\right) x^n$$

$x^n$ 的系数为 $\sum_{k=0}^{n} a_k b_{n-k}$，这是两个数列的卷积。

**答案:** $[x^n]A(x)B(x) = \sum_{k=0}^{n} a_k b_{n-k}$

---

## 题目 261 - 移位性质

**题目描述:**
设 $A(x) = \sum_{n=0}^{\infty} a_n x^n$，求数列 $\{0, a_0, a_1, a_2, \ldots\}$（即 $b_n = a_{n-1}$，$b_0 = 0$）的生成函数。

**解答过程:**

$$B(x) = \sum_{n=0}^{\infty} b_n x^n = \sum_{n=1}^{\infty} a_{n-1} x^n$$

令 $m = n-1$：
$$B(x) = \sum_{m=0}^{\infty} a_m x^{m+1} = x \sum_{m=0}^{\infty} a_m x^m = x \cdot A(x)$$

**答案:** $B(x) = x \cdot A(x)$

---

## 题目 262 - 右移$m$位

**题目描述:**
求数列 $\{\underbrace{0, 0, \ldots, 0}_{m}, a_0, a_1, a_2, \ldots\}$ 的生成函数。

**解答过程:**

设 $b_n = 0$ 当 $n < m$，$b_n = a_{n-m}$ 当 $n \geq m$。

$$B(x) = \sum_{n=m}^{\infty} a_{n-m} x^n = \sum_{k=0}^{\infty} a_k x^{k+m} = x^m \sum_{k=0}^{\infty} a_k x^k = x^m A(x)$$

**答案:** $B(x) = x^m \cdot A(x)$

---

## 题目 263 - 生成函数的微分

**题目描述:**
设 $A(x) = \sum_{n=0}^{\infty} a_n x^n$，求 $\{n \cdot a_n\}$ 的生成函数。

**解答过程:**

$$A'(x) = \sum_{n=1}^{\infty} n a_n x^{n-1}$$

乘以 $x$：
$$x A'(x) = \sum_{n=1}^{\infty} n a_n x^n = \sum_{n=0}^{\infty} n a_n x^n$$

**答案:** $G(x) = x \cdot A'(x)$

---

## 题目 264 - 生成函数的积分

**题目描述:**
设 $A(x) = \sum_{n=0}^{\infty} a_n x^n$，求数列 $\{\frac{a_n}{n+1}\}$ 的生成函数。

**解答过程:**

$$\int_0^x A(t) dt = \int_0^x \sum_{n=0}^{\infty} a_n t^n dt = \sum_{n=0}^{\infty} a_n \int_0^x t^n dt$$

$$= \sum_{n=0}^{\infty} a_n \frac{x^{n+1}}{n+1} = \sum_{n=0}^{\infty} \frac{a_n}{n+1} x^{n+1}$$

除以 $x$：
$$\frac{1}{x}\int_0^x A(t) dt = \sum_{n=0}^{\infty} \frac{a_n}{n+1} x^n$$

**答案:** $G(x) = \dfrac{1}{x}\displaystyle\int_0^x A(t) dt$

---

## 题目 265 - 指数生成函数基础

**题目描述:**
求数列 $\{1, 1, 1, 1, \ldots\}$ 的指数生成函数。

**解答过程:**

指数生成函数定义为 $E(x) = \sum_{n=0}^{\infty} \frac{a_n}{n!} x^n$。

$$E(x) = \sum_{n=0}^{\infty} \frac{1}{n!} x^n = e^x$$

**答案:** $E(x) = e^x$

---

## 题目 266 - 阶乘数列的指数生成函数

**题目描述:**
求数列 $\{0!, 1!, 2!, 3!, \ldots\}$ 的指数生成函数，即 $a_n = n!$。

**解答过程:**

$$E(x) = \sum_{n=0}^{\infty} \frac{n!}{n!} x^n = \sum_{n=0}^{\infty} x^n = \frac{1}{1-x}$$

**答案:** $E(x) = \dfrac{1}{1-x}$

---

## 题目 267 - 几何数列的指数生成函数

**题目描述:**
求数列 $\{1, r, r^2, r^3, \ldots\}$ 的指数生成函数。

**解答过程:**

$$E(x) = \sum_{n=0}^{\infty} \frac{r^n}{n!} x^n = \sum_{n=0}^{\infty} \frac{(rx)^n}{n!} = e^{rx}$$

**答案:** $E(x) = e^{rx}$

---

## 题目 268 - 指数生成函数的乘积

**题目描述:**
设 $A(x)$ 和 $B(x)$ 分别是 $\{a_n\}$ 和 $\{b_n\}$ 的指数生成函数，求 $A(x) \cdot B(x)$ 中 $\frac{x^n}{n!}$ 的系数。

**解答过程:**

$$A(x) \cdot B(x) = \left(\sum_{i=0}^{\infty} \frac{a_i}{i!} x^i\right) \left(\sum_{j=0}^{\infty} \frac{b_j}{j!} x^j\right)$$

$x^n$ 的系数为：
$$\sum_{k=0}^{n} \frac{a_k}{k!} \cdot \frac{b_{n-k}}{(n-k)!} = \frac{1}{n!} \sum_{k=0}^{n} \binom{n}{k} a_k b_{n-k}$$

因此 $\frac{x^n}{n!}$ 的系数为 $\sum_{k=0}^{n} \binom{n}{k} a_k b_{n-k}$，称为二项卷积。

**答案:** $n![x^n]A(x)B(x) = \sum_{k=0}^{n} \binom{n}{k} a_k b_{n-k}$

---

## 题目 269 - 用生成函数解递推

**题目描述:**
用生成函数方法求解递推关系：$a_n = 2a_{n-1}$，$a_0 = 3$。

**解答过程:**

设 $G(x) = \sum_{n=0}^{\infty} a_n x^n$。

由递推关系：
$$G(x) = a_0 + \sum_{n=1}^{\infty} 2a_{n-1} x^n = 3 + 2x \sum_{n=1}^{\infty} a_{n-1} x^{n-1}$$

$$= 3 + 2x G(x)$$

解得：
$$G(x)(1-2x) = 3$$
$$G(x) = \frac{3}{1-2x} = 3\sum_{n=0}^{\infty} (2x)^n = \sum_{n=0}^{\infty} 3 \cdot 2^n x^n$$

因此 $a_n = 3 \cdot 2^n$。

**答案:** $a_n = 3 \cdot 2^n$

---

## 题目 270 - 用生成函数解二阶递推

**题目描述:**
用生成函数求解：$a_n = 3a_{n-1} - 2a_{n-2}$，$a_0 = 1, a_1 = 4$。

**解答过程:**

设 $G(x) = \sum_{n=0}^{\infty} a_n x^n$。

$$G(x) = a_0 + a_1 x + \sum_{n=2}^{\infty} (3a_{n-1} - 2a_{n-2}) x^n$$

$$= 1 + 4x + 3x\sum_{n=2}^{\infty} a_{n-1} x^{n-1} - 2x^2\sum_{n=2}^{\infty} a_{n-2} x^{n-2}$$

$$= 1 + 4x + 3x(G(x) - a_0) - 2x^2 G(x)$$

$$= 1 + 4x + 3x(G(x) - 1) - 2x^2 G(x)$$

$$= 1 + x + 3xG(x) - 2x^2 G(x)$$

$$G(x)(1 - 3x + 2x^2) = 1 + x$$

$$G(x) = \frac{1+x}{1-3x+2x^2} = \frac{1+x}{(1-x)(1-2x)}$$

部分分式分解：
$$G(x) = \frac{A}{1-x} + \frac{B}{1-2x}$$

$1+x = A(1-2x) + B(1-x)$

令 $x=1$：$2 = -A \Rightarrow A = -2$
令 $x=\frac{1}{2}$：$\frac{3}{2} = \frac{B}{2} \Rightarrow B = 3$

$$G(x) = \frac{-2}{1-x} + \frac{3}{1-2x} = \sum_{n=0}^{\infty} (-2 + 3 \cdot 2^n) x^n$$

**答案:** $a_n = 3 \cdot 2^n - 2$

---

## 题目 271 - 带非齐次项的递推

**题目描述:**
用生成函数求解：$a_n = a_{n-1} + 1$，$a_0 = 0$。

**解答过程:**

设 $G(x) = \sum_{n=0}^{\infty} a_n x^n$。

$$G(x) = 0 + \sum_{n=1}^{\infty} (a_{n-1} + 1) x^n = xG(x) + \sum_{n=1}^{\infty} x^n$$

$$= xG(x) + \frac{x}{1-x}$$

$$G(x)(1-x) = \frac{x}{1-x}$$

$$G(x) = \frac{x}{(1-x)^2} = x \sum_{n=0}^{\infty} (n+1)x^n = \sum_{n=0}^{\infty} n x^n$$

**答案:** $a_n = n$

---

## 题目 272 - 卡特兰数的生成函数

**题目描述:**
卡特兰数满足 $C_0 = 1$，$C_{n+1} = \sum_{i=0}^{n} C_i C_{n-i}$。求其生成函数 $C(x)$ 满足的方程。

**解答过程:**

设 $C(x) = \sum_{n=0}^{\infty} C_n x^n$。

由递推关系（$n \geq 0$）：
$$C_{n+1} = \sum_{i=0}^{n} C_i C_{n-i}$$

两边乘以 $x^{n+1}$ 并对 $n \geq 0$ 求和：
$$\sum_{n=0}^{\infty} C_{n+1} x^{n+1} = \sum_{n=0}^{\infty} \sum_{i=0}^{n} C_i C_{n-i} x^{n+1}$$

左边：$C(x) - C_0 = C(x) - 1$

右边：$x \sum_{n=0}^{\infty} \sum_{i=0}^{n} C_i C_{n-i} x^n = x \cdot C(x)^2$（卷积）

因此：
$$C(x) - 1 = x C(x)^2$$

**答案:** $C(x) = 1 + xC(x)^2$ 或 $xC(x)^2 - C(x) + 1 = 0$

---

## 题目 273 - 卡特兰数的显式公式

**题目描述:**
求解方程 $xC(x)^2 - C(x) + 1 = 0$，得出卡特兰数的生成函数表达式。

**解答过程:**

由二次方程公式：
$$C(x) = \frac{1 \pm \sqrt{1-4x}}{2x}$$

由于 $C(0) = C_0 = 1$，需要取使 $C(x)$ 在 $x=0$ 处有定义的分支。

使用泰勒展开：
$$(1-4x)^{1/2} = 1 - 2x - 2x^2 - \cdots$$

取负号：
$$C(x) = \frac{1 - (1-4x)^{1/2}}{2x}$$

当 $x \to 0$：
$$C(x) \to \frac{1 - 1 + 2x + \cdots}{2x} = 1$$

取正号会导致 $C(x) \to \infty$ 当 $x \to 0$。

**答案:** $C(x) = \dfrac{1 - \sqrt{1-4x}}{2x}$

---

## 题目 274 - 组合恒等式证明

**题目描述:**
证明 $\sum_{k=0}^{n} \binom{n}{k} = 2^n$ 使用生成函数方法。

**解答过程:**

考虑二项式定理：
$$(1+x)^n = \sum_{k=0}^{n} \binom{n}{k} x^k$$

令 $x = 1$：
$$(1+1)^n = 2^n = \sum_{k=0}^{n} \binom{n}{k}$$

这正是我们需要证明的恒等式。

**答案:** 由 $(1+x)^n$ 在 $x=1$ 处的取值证明 $\sum_{k=0}^{n} \binom{n}{k} = 2^n$

---

## 题目 275 - 范德蒙德卷积

**题目描述:**
证明范德蒙德卷积：$\sum_{k=0}^{r} \binom{m}{k} \binom{n}{r-k} = \binom{m+n}{r}$ 使用生成函数。

**解答过程:**

考虑生成函数：
$$(1+x)^m \cdot (1+x)^n = (1+x)^{m+n}$$

左边展开：
$$(1+x)^m (1+x)^n = \left(\sum_{i=0}^{m} \binom{m}{i} x^i\right) \left(\sum_{j=0}^{n} \binom{n}{j} x^j\right)$$

$$= \sum_{r=0}^{m+n} \left(\sum_{k=0}^{r} \binom{m}{k} \binom{n}{r-k}\right) x^r$$

右边展开：
$$(1+x)^{m+n} = \sum_{r=0}^{m+n} \binom{m+n}{r} x^r$$

比较 $x^r$ 的系数即得证。

**答案:** 由 $(1+x)^m(1+x)^n=(1+x)^{m+n}$ 比较系数得证

---

## 题目 276 - 错位排列的指数生成函数

**题目描述:**
设 $D_n$ 为 $n$ 个元素的错位排列数，求其指数生成函数。

**解答过程:**

错位排列数满足：
$$D_n = n! \sum_{k=0}^{n} \frac{(-1)^k}{k!}$$

指数生成函数：
$$E(x) = \sum_{n=0}^{\infty} \frac{D_n}{n!} x^n = \sum_{n=0}^{\infty} \sum_{k=0}^{n} \frac{(-1)^k}{k!} x^n$$

$$= \sum_{k=0}^{\infty} \frac{(-1)^k}{k!} \sum_{n=k}^{\infty} x^n = \sum_{k=0}^{\infty} \frac{(-1)^k}{k!} \cdot \frac{x^k}{1-x}$$

更直接地，注意到 $D_n/n! \approx 1/e$：
$$E(x) = \frac{e^{-x}}{1-x}$$

**答案:** $E(x) = \dfrac{e^{-x}}{1-x}$

---

## 题目 277 - 分拆数的生成函数

**题目描述:**
设 $p(n)$ 为 $n$ 的分拆数，求其生成函数。

**解答过程:**

分拆是将 $n$ 写成正整数之和的方式（不计顺序）。

考虑每个正整数 $k$ 可以出现 $0, 1, 2, \ldots$ 次，对应的生成函数为：
$$1 + x^k + x^{2k} + x^{3k} + \cdots = \frac{1}{1-x^k}$$

因此分拆数的生成函数为：
$$P(x) = \prod_{k=1}^{\infty} \frac{1}{1-x^k} = \frac{1}{(1-x)(1-x^2)(1-x^3)\cdots}$$

**答案:** $P(x) = \displaystyle\prod_{k=1}^{\infty} \dfrac{1}{1-x^k}$

---

## 题目 278 - 受限分拆

**题目描述:**
求仅使用 $1, 2, 3$ 作为部分的分拆数的生成函数。

**解答过程:**

如果只允许使用 $1, 2, 3$ 作为分拆的部分：

- 数字 $1$ 可选 $0, 1, 2, \ldots$ 次，贡献 $\frac{1}{1-x}$
- 数字 $2$ 可选 $0, 1, 2, \ldots$ 次，贡献 $\frac{1}{1-x^2}$
- 数字 $3$ 可选 $0, 1, 2, \ldots$ 次，贡献 $\frac{1}{1-x^3}$

生成函数为：
$$G(x) = \frac{1}{(1-x)(1-x^2)(1-x^3)}$$

**答案:** $G(x) = \dfrac{1}{(1-x)(1-x^2)(1-x^3)}$

---

## 题目 279 - 不同部分的分拆

**题目描述:**
求各部分互不相同的分拆数的生成函数。

**解答过程:**

如果要求各部分互不相同，则每个正整数 $k$ 最多只能出现 $0$ 次或 $1$ 次。

对应的生成函数为：
$$1 + x^k$$

因此生成函数为：
$$G(x) = \prod_{k=1}^{\infty} (1+x^k) = (1+x)(1+x^2)(1+x^3)\cdots$$

**答案:** $G(x) = \displaystyle\prod_{k=1}^{\infty} (1+x^k)$

---

## 题目 280 - 奇数部分的分拆

**题目描述:**
求各部分均为奇数的分拆数的生成函数。

**解答过程:**

如果只允许使用奇数作为部分：

$$G(x) = \prod_{k \geq 1, k \text{ 奇数}} \frac{1}{1-x^k} = \frac{1}{(1-x)(1-x^3)(1-x^5)\cdots}$$

**答案:** $G(x) = \displaystyle\prod_{k=0}^{\infty} \dfrac{1}{1-x^{2k+1}}$

---

## 题目 281 - 欧拉五边形数定理

**题目描述:**
证明欧拉五边形数定理：$\prod_{k=1}^{\infty} (1-x^k) = \sum_{n=-\infty}^{\infty} (-1)^n x^{n(3n-1)/2}$。

**解答过程:**

这是分拆理论中的著名定理。五边形数为 $\omega(n) = \frac{n(3n-1)}{2}$。

定理表明：
$$\prod_{k=1}^{\infty} (1-x^k) = 1 - x - x^2 + x^5 + x^7 - x^{12} - x^{15} + \cdots$$

其中指数 $\frac{n(3n-1)}{2}$ 对 $n = 1, -1, 2, -2, \ldots$ 给出 $1, 2, 5, 7, 12, 15, \ldots$。

分拆数 $p(n)$ 满足递推：
$$p(n) = \sum_{k \neq 0} (-1)^{k-1} p(n - \omega(k))$$

**答案:** $\displaystyle\prod_{k=1}^{\infty}(1-x^k)=\sum_{n=-\infty}^{\infty}(-1)^n x^{\frac{n(3n-1)}{2}}$

---

## 题目 282 - 组合计数问题

**题目描述:**
用生成函数求方程 $x_1 + x_2 + x_3 = 10$ 的非负整数解的个数，其中 $0 \leq x_1 \leq 3$，$0 \leq x_2 \leq 4$，$0 \leq x_3 \leq 5$。

**解答过程:**

对于 $x_1$，生成函数为 $1 + x + x^2 + x^3 = \frac{1-x^4}{1-x}$

对于 $x_2$，生成函数为 $1 + x + x^2 + x^3 + x^4 = \frac{1-x^5}{1-x}$

对于 $x_3$，生成函数为 $1 + x + \cdots + x^5 = \frac{1-x^6}{1-x}$

总生成函数：
$$G(x) = \frac{(1-x^4)(1-x^5)(1-x^6)}{(1-x)^3}$$

需要求 $[x^{10}]G(x)$。

展开 $(1-x)^{-3} = \sum_{n=0}^{\infty} \binom{n+2}{2} x^n$

计算各项贡献得解的个数为 $6$。

**答案:** 非负整数解个数为 $6$

---

## 题目 283 - 取球问题

**题目描述:**
有红球、绿球、蓝球各若干个，其中红球取偶数个，绿球取奇数个，蓝球取 $3$ 的倍数个。求取 $n$ 个球的方法数的生成函数。

**解答过程:**

红球（偶数个）：$1 + x^2 + x^4 + \cdots = \frac{1}{1-x^2}$

绿球（奇数个）：$x + x^3 + x^5 + \cdots = \frac{x}{1-x^2}$

蓝球（$3$ 的倍数）：$1 + x^3 + x^6 + \cdots = \frac{1}{1-x^3}$

生成函数：
$$G(x) = \frac{1}{1-x^2} \cdot \frac{x}{1-x^2} \cdot \frac{1}{1-x^3} = \frac{x}{(1-x^2)^2(1-x^3)}$$

**答案:** $G(x) = \dfrac{x}{(1-x^2)^2(1-x^3)}$

---

## 题目 284 - 斐波那契数列的通项

**题目描述:**
用生成函数推导斐波那契数列的通项公式（比内公式）。

**解答过程:**

斐波那契生成函数：
$$F(x) = \frac{x}{1-x-x^2} = \frac{x}{(1-\phi x)(1-\hat{\phi} x)}$$

其中 $\phi = \frac{1+\sqrt{5}}{2}$（黄金比例），$\hat{\phi} = \frac{1-\sqrt{5}}{2}$。

部分分式分解：
$$F(x) = \frac{A}{1-\phi x} + \frac{B}{1-\hat{\phi} x}$$

计算得 $A = \frac{1}{\sqrt{5}}$，$B = -\frac{1}{\sqrt{5}}$

$$F(x) = \frac{1}{\sqrt{5}}\left(\frac{1}{1-\phi x} - \frac{1}{1-\hat{\phi} x}\right) = \frac{1}{\sqrt{5}}\sum_{n=0}^{\infty} (\phi^n - \hat{\phi}^n) x^n$$

**答案:** $F_n = \dfrac{\phi^n - \hat{\phi}^n}{\sqrt{5}}$，其中 $\phi = \dfrac{1+\sqrt{5}}{2}$

---

## 题目 285 - 多重集的排列

**题目描述:**
设有多重集 $\{1^{n_1}, 2^{n_2}, \ldots, k^{n_k}\}$，求其排列数的指数生成函数。

**解答过程:**

多重集的排列数为多项式系数：
$$\frac{n!}{n_1! n_2! \cdots n_k!}$$

其中 $n = n_1 + n_2 + \cdots + n_k$。

对固定的重数 $(n_1, \ldots, n_k)$，$n$ 元排列的指数生成函数贡献为：
$$\frac{1}{n_1! n_2! \cdots n_k!} x^n = \frac{x^{n_1}}{n_1!} \cdot \frac{x^{n_2}}{n_2!} \cdots \frac{x^{n_k}}{n_k!}$$

对所有可能的 $n_i$ 求和：
$$E(x) = \left(\sum_{n_1=0}^{\infty} \frac{x^{n_1}}{n_1!}\right) \cdots \left(\sum_{n_k=0}^{\infty} \frac{x^{n_k}}{n_k!}\right) = (e^x)^k = e^{kx}$$

**答案:** $E(x) = e^{kx}$

---

## 题目 286 - 错排问题应用

**题目描述:**
求 $6$ 个元素的错位排列数 $D_6$。

**解答过程:**

错位排列数公式：
$$D_n = n! \sum_{k=0}^{n} \frac{(-1)^k}{k!}$$

计算 $D_6$：
$$D_6 = 6! \left(\frac{1}{0!} - \frac{1}{1!} + \frac{1}{2!} - \frac{1}{3!} + \frac{1}{4!} - \frac{1}{5!} + \frac{1}{6!}\right)$$

$$= 720 \left(1 - 1 + \frac{1}{2} - \frac{1}{6} + \frac{1}{24} - \frac{1}{120} + \frac{1}{720}\right)$$

$$= 720 - 720 + 360 - 120 + 30 - 6 + 1 = 265$$

**答案:** $D_6 = 265$

---

## 题目 287 - 第二类斯特林数

**题目描述:**
设 $S(n,k)$ 为第二类斯特林数（将 $n$ 个元素划分为 $k$ 个非空子集的方式数），求其指数生成函数。

**解答过程:**

固定 $k$，$S(n,k)$ 作为 $n$ 的序列的指数生成函数：
$$\sum_{n=0}^{\infty} S(n,k) \frac{x^n}{n!} = \frac{(e^x-1)^k}{k!}$$

这是因为每个非空子集贡献 $(e^x - 1)$（非空集合的指数生成函数），$k$ 个非空子集的选择还要除以 $k!$（因为子集无序）。

**答案:** $\displaystyle\sum_{n=0}^{\infty} S(n,k) \frac{x^n}{n!} = \dfrac{(e^x-1)^k}{k!}$

---

## 题目 288 - 贝尔数

**题目描述:**
设 $B_n$ 为贝尔数（$n$ 元集合的划分数），用斯特林数表示 $B_n$，并求其指数生成函数。

**解答过程:**

$$B_n = \sum_{k=0}^{n} S(n,k)$$

指数生成函数：
$$E(x) = \sum_{n=0}^{\infty} B_n \frac{x^n}{n!} = \sum_{n=0}^{\infty} \sum_{k=0}^{n} S(n,k) \frac{x^n}{n!}$$

$$= \sum_{k=0}^{\infty} \sum_{n=k}^{\infty} S(n,k) \frac{x^n}{n!} = \sum_{k=0}^{\infty} \frac{(e^x-1)^k}{k!} = e^{e^x-1}$$

**答案:** $E(x) = e^{e^x-1}$

---

## 题目 289 - 排列的逆序数

**题目描述:**
求 $n$ 元排列中逆序数恰好为 $k$ 的排列数的生成函数。

**解答过程:**

设 $I_n(q)$ 为逆序数的生成函数，其中 $q$ 标记逆序数。

$$I_n(q) = \sum_{\pi \in S_n} q^{\text{inv}(\pi)}$$

利用分解：$n$ 元排列可以看作将 $n$ 插入 $(n-1)$ 元排列的某个位置，产生 $0$ 到 $n-1$ 个新逆序。

$$I_n(q) = (1+q+q^2+\cdots+q^{n-1}) I_{n-1}(q) = \frac{1-q^n}{1-q} I_{n-1}(q)$$

递归得：
$$I_n(q) = \prod_{i=1}^{n} \frac{1-q^i}{1-q} = \frac{(1-q)(1-q^2)\cdots(1-q^n)}{(1-q)^n}$$

**答案:** $I_n(q) = \displaystyle\prod_{i=1}^{n} \dfrac{1-q^i}{1-q}$

---

## 题目 290 - 组合数的生成函数

**题目描述:**
求固定 $k$，变化 $n$ 的组合数 $\binom{n}{k}$ 的生成函数。

**解答过程:**

固定 $k$，让 $n$ 变化（$n \geq k$）。

$$G(x) = \sum_{n=k}^{\infty} \binom{n}{k} x^n$$

由 $\binom{n}{k} = [t^k](1+t)^n$，或直接利用：

$$\sum_{n=k}^{\infty} \binom{n}{k} x^n = \frac{x^k}{(1-x)^{k+1}}$$

这是因为 $\binom{n}{k}$ 是 $(1-x)^{-(k+1)}$ 中 $x^{n-k}$ 的系数。

**答案:** $G(x) = \dfrac{x^k}{(1-x)^{k+1}}$

---

## 题目 291 - 交错级数求和

**题目描述:**
计算 $\sum_{n=0}^{\infty} \frac{(-1)^n}{2n+1}$ 使用生成函数方法。

**解答过程:**

考虑 $\arctan x$ 的展开：
$$\arctan x = \sum_{n=0}^{\infty} \frac{(-1)^n}{2n+1} x^{2n+1}$$

令 $x = 1$：
$$\arctan 1 = \frac{\pi}{4} = \sum_{n=0}^{\infty} \frac{(-1)^n}{2n+1}$$

因此级数和为 $\frac{\pi}{4}$。

**答案:** $\displaystyle\sum_{n=0}^{\infty} \frac{(-1)^n}{2n+1} = \dfrac{\pi}{4}$

---

## 题目 292 - 调和数的生成函数

**题目描述:**
设 $H_n = 1 + \frac{1}{2} + \cdots + \frac{1}{n}$ 为第 $n$ 个调和数，求其生成函数。

**解答过程:**

$$G(x) = \sum_{n=1}^{\infty} H_n x^n$$

利用 $H_n = \sum_{k=1}^{n} \frac{1}{k}$：

$$G(x) = \sum_{n=1}^{\infty} \sum_{k=1}^{n} \frac{1}{k} x^n = \sum_{k=1}^{\infty} \frac{1}{k} \sum_{n=k}^{\infty} x^n$$

$$= \sum_{k=1}^{\infty} \frac{1}{k} \cdot \frac{x^k}{1-x} = \frac{1}{1-x} \sum_{k=1}^{\infty} \frac{x^k}{k}$$

$$= \frac{1}{1-x} (-\ln(1-x)) = -\frac{\ln(1-x)}{1-x}$$

**答案:** $G(x) = -\dfrac{\ln(1-x)}{1-x}$

---

## 题目 293 - 指数生成函数的微分

**题目描述:**
设 $E(x) = \sum_{n=0}^{\infty} a_n \frac{x^n}{n!}$，求 $\{a_{n+1}\}$ 的指数生成函数。

**解答过程:**

$$E'(x) = \sum_{n=1}^{\infty} a_n \frac{x^{n-1}}{(n-1)!} = \sum_{n=0}^{\infty} a_{n+1} \frac{x^n}{n!}$$

这正是 $\{a_{n+1}\}$ 的指数生成函数。

**答案:** $E_{a_{n+1}}(x) = E'(x)$

---

## 题目 294 - 指数生成函数的积分

**题目描述:**
设 $E(x) = \sum_{n=0}^{\infty} a_n \frac{x^n}{n!}$，求 $\{a_{n-1}\}$（$a_{-1}=0$）的指数生成函数。

**解答过程:**

设 $b_n = a_{n-1}$（$b_0 = 0$）。

$$E_b(x) = \sum_{n=1}^{\infty} a_{n-1} \frac{x^n}{n!} = \sum_{m=0}^{\infty} a_m \frac{x^{m+1}}{(m+1)!}$$

$$= \int_0^x \sum_{m=0}^{\infty} a_m \frac{t^m}{m!} dt = \int_0^x E(t) dt$$

**答案:** $E_{b}(x) = \displaystyle\int_0^x E(t) dt$

---

## 题目 295 - 莫比乌斯函数

**题目描述:**
设 $\mu(n)$ 为莫比乌斯函数，求其狄利克雷生成函数。

**解答过程:**

狄利克雷生成函数定义为 $F(s) = \sum_{n=1}^{\infty} \frac{a_n}{n^s}$。

对于莫比乌斯函数：
$$\sum_{n=1}^{\infty} \frac{\mu(n)}{n^s} = \frac{1}{\zeta(s)}$$

其中 $\zeta(s)$ 是黎曼 $\zeta$ 函数。

这是莫比乌斯反演公式与 $\zeta(s) = \sum_{n=1}^{\infty} \frac{1}{n^s} = \prod_p \frac{1}{1-p^{-s}}$ 的结果。

**答案:** $\displaystyle\sum_{n=1}^{\infty} \frac{\mu(n)}{n^s} = \dfrac{1}{\zeta(s)}$

---

## 题目 296 - 无限制的组合

**题目描述:**
从 $n$ 个不同元素中可重复地选取 $k$ 个元素（不考虑顺序），求方法数的生成函数。

**解答过程:**

可重复组合数为 $\binom{n+k-1}{k}$。

固定 $n$，对 $k$ 的生成函数：
$$G(x) = \sum_{k=0}^{\infty} \binom{n+k-1}{k} x^k$$

由负二项式定理：
$$\binom{n+k-1}{k} = \binom{n+k-1}{n-1} = (-1)^k \binom{-n}{k}$$

因此：
$$G(x) = \sum_{k=0}^{\infty} (-1)^k \binom{-n}{k} x^k = (1-x)^{-n}$$

**答案:** $G(x) = (1-x)^{-n}$

---

## 题目 297 - 整数解的个数

**题目描述:**
求方程 $x_1 + x_2 + \cdots + x_k = n$ 的正整数解的个数。

**解答过程:**

每个 $x_i \geq 1$，对应的生成函数为：
$$x + x^2 + x^3 + \cdots = \frac{x}{1-x}$$

$k$ 个变量的生成函数为：
$$G(x) = \left(\frac{x}{1-x}\right)^k = \frac{x^k}{(1-x)^k}$$

$x^n$ 的系数为：
$$[x^n]\frac{x^k}{(1-x)^k} = [x^{n-k}](1-x)^{-k} = \binom{(n-k)+k-1}{k-1} = \binom{n-1}{k-1}$$

**答案:** 正整数解个数为 $\binom{n-1}{k-1}$

---

## 题目 298 - 隔板法生成函数

**题目描述:**
求方程 $x_1 + x_2 + x_3 = 20$ 的非负整数解个数，其中 $x_1 \geq 2$，$x_2 \geq 3$，$x_3 \geq 4$。

**解答过程:**

令 $y_1 = x_1 - 2$，$y_2 = x_2 - 3$，$y_3 = x_3 - 4$，则 $y_1 + y_2 + y_3 = 11$。

非负整数解个数为：
$$\binom{11+3-1}{3-1} = \binom{13}{2} = 78$$

用生成函数验证：

$$G(x) = \frac{x^2}{1-x} \cdot \frac{x^3}{1-x} \cdot \frac{x^4}{1-x} = \frac{x^9}{(1-x)^3}$$

求 $[x^{20}]G(x) = [x^{11}](1-x)^{-3} = \binom{13}{2} = 78$。

**答案:** 解的个数为 $78$

---

## 题目 299 - 递推的特解形式

**题目描述:**
求递推关系 $a_n - 5a_{n-1} + 6a_{n-2} = n \cdot 2^n$ 的特解形式。

**解答过程:**

齐次方程特征根：$r^2 - 5r + 6 = 0$，$(r-2)(r-3) = 0$，$r_1 = 2, r_2 = 3$。

非齐次项为 $n \cdot 2^n$。由于 $2$ 是特征根（单根），特解形式为：
$$a_n^{(p)} = n(An + B)2^n = (An^2 + Bn)2^n$$

即需要乘以 $n$ 的因子来避免与齐次解重合。

**答案:** 特解形式为 $a_n^{(p)} = (An^2 + Bn)2^n$

---

## 题目 300 - 生成函数综合应用

**题目描述:**
设 $a_n$ 表示用 $1 \times 1$ 和 $1 \times 2$ 的砖块铺满 $1 \times n$ 的矩形的方法数。
(1) 建立递推关系；(2) 用生成函数求通项公式。

**解答过程:**

**(1) 递推关系**

考虑最右边的一块砖：
- 如果是 $1 \times 1$ 砖，剩余 $1 \times (n-1)$ 有 $a_{n-1}$ 种铺法
- 如果是 $1 \times 2$ 砖，剩余 $1 \times (n-2)$ 有 $a_{n-2}$ 种铺法

因此：
$$a_n = a_{n-1} + a_{n-2}$$

初始条件：$a_0 = 1$（空铺），$a_1 = 1$（只能放 $1 \times 1$）。

这正是斐波那契数列！

**(2) 生成函数求解**

$$G(x) = \sum_{n=0}^{\infty} a_n x^n$$

$$G(x) = a_0 + a_1 x + \sum_{n=2}^{\infty} (a_{n-1} + a_{n-2}) x^n$$
$$= 1 + x + x(G(x) - a_0) + x^2 G(x)$$
$$= 1 + x + x(G(x) - 1) + x^2 G(x)$$
$$= 1 + xG(x) + x^2 G(x)$$

$$G(x) = \frac{1}{1-x-x^2}$$

由部分分式分解（类似题目284）：
$$a_n = \frac{\phi^{n+1} - \hat{\phi}^{n+1}}{\sqrt{5}} = F_{n+1}$$

其中 $\phi = \frac{1+\sqrt{5}}{2}$，$F_{n+1}$ 是第 $n+1$ 个斐波那契数。

**答案:** (1) $a_n = a_{n-1} + a_{n-2}$；(2) $a_n = F_{n+1} = \dfrac{\phi^{n+1} - \hat{\phi}^{n+1}}{\sqrt{5}}$

---

# 第6卷完

本卷涵盖生成函数的核心理论与应用，包括普通生成函数、指数生成函数、生成函数运算技巧以及各类组合问题的求解方法。

共完成题目：50道（251-300）
